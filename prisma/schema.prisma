generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Todo {
  id        Int      @id @default(autoincrement())
  title     String
  createdAt DateTime @default(now())
}

model User {
  id              String               @id @db.VarChar(255)
  name            String               @db.VarChar(255)
  email           String               @db.VarChar(255)
  emailVerified   Boolean              @default(false)
  image           String?              @db.VarChar(255)
  createdAt       DateTime             @default(now())
  updatedAt       DateTime             @default(now()) @updatedAt
  sessions        Session[]
  accounts        Account[]
  WeightEntires   WeightEntry[]
  BloodPressure   BloodPressureEntry[]
  waterEntries    WaterEntry[]
  exerciseEntries ExerciseEntry[]

  @@unique([email])
  @@map("user")
}

model UserRole {
  userId String @db.VarChar(255)
  role   String @db.VarChar(50)

  @@id([userId, role])
}

model Session {
  id        String   @id
  expiresAt DateTime
  token     String   @db.VarChar(255)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  ipAddress String?  @db.VarChar(255)
  userAgent String?  @db.VarChar(255)
  userId    String   @db.VarChar(255)
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([token])
  @@map("session")
}

model Account {
  id                    String    @id @db.VarChar(255)
  accountId             String    @db.VarChar(255)
  providerId            String    @db.VarChar(255)
  userId                String    @db.VarChar(255)
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?   @db.VarChar(255)
  refreshToken          String?   @db.VarChar(255)
  idToken               String?   @db.VarChar(255)
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?   @db.VarChar(255)
  password              String?   @db.VarChar(255)
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@map("account")
}

model Verification {
  id         String   @id
  identifier String   @db.VarChar(255)
  value      String   @db.VarChar(255)
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @default(now()) @updatedAt

  @@map("verification")
}

model WeightEntry {
  id        Int      @id @default(autoincrement())
  weight    Float // in kg or lbs based on user preference
  notes     String?  @db.VarChar(2000)
  date      DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  userId    String

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model BloodPressureEntry {
  id               Int      @id @default(autoincrement())
  systolic         Int
  diastolic        Int
  pulse            Int?
  oxygenSaturation Int?
  position         String   @default("SITTING")
  notes            String?  @db.VarChar(2000)
  date             DateTime
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  userId           String

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model WaterEntry {
  id        Int      @id @default(autoincrement())
  amount    Float
  unit      String   @db.VarChar(50)
  date      DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  userId    String

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model ExerciseEntry {
  id             Int      @id @default(autoincrement())
  duration       Int // in minutes
  caloriesBurned Int?
  intensity      String   @default("MODERATE") @db.VarChar(50)
  dateTime       DateTime
  notes          String?  @db.VarChar(2000)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  userId         String   @db.VarChar(255)
  exerciseId     Int?

  user     User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  exercise Exercise? @relation(fields: [exerciseId], references: [id])
}

model Exercise {
  id             Int      @id @default(autoincrement())
  name           String   @db.VarChar(255)
  caloriesPerMin Float?
  exerciseType   String   @db.VarChar(50)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  exerciseEntries ExerciseEntry[]
}

/**
 * OLD SCHEMA
 * generator client {
 * provider = "prisma-client-js"
 * }
 * datasource db {
 * provider = "postgresql"
 * url      = env("DATABASE_URL")
 * }
 * model FoodEntry {
 * id             String         @id @default(uuid())
 * name           String
 * quantity       Float
 * unit           String
 * calories       Int
 * protein        Float? // in grams
 * carbs          Float? // in grams
 * fat            Float? // in grams
 * mealType       MealType
 * date           DateTime
 * time           DateTime
 * notes          String?
 * createdAt      DateTime       @default(now())
 * updatedAt      DateTime       @updatedAt
 * user           User           @relation(fields: [userId], references: [id], onDelete: Cascade)
 * userId         String
 * food           Food?          @relation(fields: [foodId], references: [id])
 * foodId         String?
 * foodCategories FoodCategory[] @relation("FoodCategoryFoods")
 * }
 * model FoodCategory {
 * id        String   @id @default(uuid())
 * name      String
 * createdAt DateTime @default(now())
 * updatedAt DateTime @updatedAt
 * foods     Food[]   @relation("FoodCategoryFoods")
 * FoodEntry FoodEntry[] @relation("FoodCategoryFoods")
 * }
 * model Food_Category_Food {
 * foodId         String
 * foodCategoryId String
 * @@id([foodId, foodCategoryId])
 * }
 * model Food {
 * id           String      @id @default(uuid())
 * name         String
 * brand        String?
 * servingSize  Float?
 * servingUnit  String?
 * calories     Int
 * protein      Float? // in grams
 * carbs        Float? // in grams
 * fat          Float? // in grams
 * fiber        Float? // in grams
 * sugar        Float? // in grams
 * sodium       Float? // in mg
 * isCustom     Boolean     @default(false)
 * createdAt    DateTime    @default(now())
 * updatedAt    DateTime    @updatedAt
 * foodEntries  FoodEntry[]
 * resturauntId String?
 * resturaunt   Resturaunt? @relation(fields: [resturauntId], references: [id])
 * FoodCategory FoodCategory[] @relation("FoodCategoryFoods")
 * }
 * model Resturaunt {
 * id        String   @id @default(uuid())
 * name      String
 * address   String
 * createdAt DateTime @default(now())
 * updatedAt DateTime @updatedAt
 * foods     Food[]
 * }
 * model DailyNutritionGoal {
 * id       String @id @default(uuid())
 * calories Int
 * protein  Float? // in grams
 * carbs    Float? // in grams
 * fat      Float? // in grams
 * user     User   @relation(fields: [userId], references: [id], onDelete: Cascade)
 * userId   String @unique
 * }
 * enum MealType {
 * BREAKFAST
 * LUNCH
 * DINNER
 * SNACK
 * }
 * enum Position {
 * SITTING
 * STANDING
 * LYING
 * }
 * enum Intensity {
 * LOW
 * MODERATE
 * HIGH
 * }
 * enum ExerciseType {
 * CARDIO
 * STRENGTH
 * FLEXIBILITY
 * BALANCE
 * SPORT
 * OTHER
 * }
 * enum Groups {
 * USER
 * ADMIN
 * }
 * enum Gender {
 * MALE
 * FEMALE
 * }
 * enum Unit {
 * SERVING
 * GRAMS
 * OUNCES
 * POUNDS
 * KILOGRAMS
 * TEASPOON
 * TABLESPOON
 * CUP
 * PINT
 * QUART
 * PINCH
 * OUNCE
 * POUND
 * }
 */
